var EventEmitter = require("events").EventEmitter,
	util		 = require("util");


function Calculator() {
	this.on("got number", function(err, number) {
		console.log(number)
	})
}

util.inherits(Calculator, EventEmitter);

Calculator.prototype.calculate = function(number, divisor, callback) {
	console.log("Started")
	for (var i = number; i >= 0; i--) {
		if (i % divisor == 0) {
			if (callback) {
				callback(null, i)
			} else {
				this.emit("got number", null, i)
			}
		};
	};
	console.log("Ended")
}

var c = new Calculator(),
	c2 = new Calculator();



c.calculate(20000, 50);
c2.calculate(20000, 50);



