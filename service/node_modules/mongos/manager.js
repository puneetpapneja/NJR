var Mongos = require("./mongos.js"),
	Address = require("./address.js");	

function Manager(name, email, phone) {
	this.validations = {
		presence: ["name", "email"],
		format: { email: /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,
				  phone: /^\d{10}$/ },
		unique: ["email"]
	};

	this.has_many("addresses", Address);
	this.table_name = "employees";

	this.name = name
	this.email = email
	this.phone = phone

}

Mongos.superclassof(Manager, {host: "127.0.0.1", port: "27017", database: "consulting"});


module.exports = Manager;

var M = require("./manager.js");
var A = require("./address.js");
M.last(function(e,o)  {  o[0].addresses(function(ee,oo) {  console.log(oo) } )   } )
m = new M("ABC", "d@d.com", 1234567890)
m.addresses = [new A("SFSFSFS"), new A("BBBB")]
m.save(function(err, docs) {
	console.log(docs);
})

m1 = new M("AB", "dss@d.com", 1234567890)
m1.save()


